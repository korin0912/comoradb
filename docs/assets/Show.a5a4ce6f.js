import{H as T,c as O}from"./Common.923df55f.js";import{bz as y,aG as a,Z as n,_ as s,K as p,aM as m,B as D,F as h,a4 as v,Y as I,aJ as W,aH as C,bE as S,bD as M,aO as k,a5 as P,X as b}from"./index.c574d693.js";const B={name:"CalendarPCTable",props:["weeks"]},H=e=>(W("data-v-3a2316fb"),e=e(),C(),e),N=H(()=>s("thead",null,[s("tr",null,[s("th",{class:"dark"},"\u65E5"),s("th",{class:"pale"},"\u6708"),s("th",{class:"pale"},"\u706B"),s("th",{class:"pale"},"\u6C34"),s("th",{class:"pale"},"\u6728"),s("th",{class:"pale"},"\u91D1"),s("th",{class:"dark"},"\u571F")])],-1)),V={key:0,class:"day"},j={key:0,class:"date holydays"},E={key:1,class:"date"},z=["href"];function F(e,l,i,c,o,d){return a(),n("table",null,[N,s("tbody",null,[(a(!0),n(p,null,m(i.weeks,(t,_)=>(a(),n("tr",{key:`week-${_}`},[(a(!0),n(p,null,m(t,(r,u)=>(a(),n("td",{key:`day-${_}-${u}`,class:D(r.date!=-1?"":"hide")},[r.date!=-1?(a(),n("div",V,[u==0||u==6?(a(),n("div",j,h(r.date)+"\u65E5 ",1)):(a(),n("div",E,h(r.date)+"\u65E5 ",1)),(a(!0),n(p,null,m(r.movies,f=>(a(),n("div",{key:`movie-${f.id}`,class:"movie"},[v(" \u30FB"),s("a",{href:f.url},h(f.name),9,z)]))),128))])):I("",!0)],2))),128))]))),128))])])}const x=y(B,[["render",F],["__scopeId","data-v-3a2316fb"]]);const G={name:"CalendarPCTable",props:["days"],data:function(){return{dayOfWeeks:["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"]}}},J={key:0,class:"date holydays"},K={key:1,class:"date"},L={class:"day"},R=["href"];function X(e,l,i,c,o,d){return a(),n("table",null,[s("tbody",null,[(a(!0),n(p,null,m(i.days,(t,_)=>(a(),n("tr",{key:`day-${_}`},[t.dayOfWeek==0||t.dayOfWeek==6?(a(),n("th",J,h(t.date)+"\u65E5",1)):(a(),n("th",K,h(t.date)+"\u65E5",1)),s("th",{class:D((t.dayOfWeek==0||t.dayOfWeek==6?"dark":"pale")+" day-of-week")},h(e.dayOfWeeks[t.dayOfWeek]),3),s("td",null,[s("div",L,[(a(!0),n(p,null,m(t.movies,r=>(a(),n("div",{key:`movie-${r.id}`,class:"movie"},[v(" \u30FB"),s("a",{href:r.url},h(r.name),9,R)]))),128))])])]))),128))])])}const Y=y(G,[["render",X],["__scopeId","data-v-d0da87ff"]]);const Z={name:"CalendarShow",components:{Header:T,PCTable:x,MobileTable:Y},data:function(){let l=S().params.calendarMonth,i=parseInt(l.split("-")[0]),c=parseInt(l.split("-")[1]),o=$(i,c),d=w(o);return{isMobile:O.isMobile(),year:i,month:c,days:o,weeks:d}},methods:{moveMonth:function(e){this.month=parseInt(this.month)+parseInt(e),this.month<=0&&(this.year=parseInt(this.year)-1,this.month=12),this.month>12&&(this.year=parseInt(this.year)+1,this.month=1),this.days=$(this.year,this.month),this.weeks=w(this.days)}},mounted:async function(){await M.execute()}};function $(e,l){let i=[],c=M.getMoviesData(),o=new Date(e,l-1,1),d=new Date(e,l,0);for(let t=1;t<=d.getDate();t++){let _={date:t,dayOfWeek:(o.getDay()+t-1)%7,movies:[]},r=e+"/"+("0"+l).slice(-2)+"/"+("0"+t).slice(-2);Object.keys(c).forEach(u=>{let f=c[u];f.releaseDate==r&&_.movies.push({id:u,name:f.name,url:f.url})}),i.push(_)}return i}function w(e){e=O.copyDeep(e);let l=e[0].dayOfWeek;for(let o=0;o<l;o++)e.unshift({date:-1,dayOfWeek:o,movies:[]});let i=e[e.length-1].dayOfWeek;for(let o=i+1;o<7;o++)e.push({date:-1,dayOfWeek:o,movies:[]});let c=[];for(let o=0;o<e.length/7;o++){let d=[];for(let t=0;t<7;t++)d.push(e[o*7+t]);c.push(d)}return c}const g=e=>(W("data-v-2f370aee"),e=e(),C(),e),q={class:"subject"},A=g(()=>s("i",{class:"icon left"},null,-1)),Q=[A],U=g(()=>s("i",{class:"icon right"},null,-1)),ee=[U];function te(e,l,i,c,o,d){const t=k("Header"),_=k("PCTable"),r=k("MobileTable");return a(),n("div",null,[P(t),s("h3",null,[s("div",q,[s("button",{onClick:l[0]||(l[0]=u=>d.moveMonth(-1)),class:"move-month"},Q),v(" "+h(e.year)+"\u5E74"+h(("0"+e.month).slice(-2))+"\u6708 ",1),s("button",{onClick:l[1]||(l[1]=u=>d.moveMonth(1)),class:"move-month"},ee)])]),e.isMobile==!1?(a(),b(_,{key:0,weeks:e.weeks},null,8,["weeks"])):(a(),b(r,{key:1,days:e.days},null,8,["days"]))])}const oe=y(Z,[["render",te],["__scopeId","data-v-2f370aee"]]);export{oe as default};
