import{H as V,c as P}from"./Common-BbRbKBwD.js";import{bO as v,aK as a,u as n,v as t,F as p,aV as y,at as _,t as C,H as w,b9 as m,bR as $,I as B,s as T,bS as H,aX as b}from"./index-Cyww_-FW.js";const N={name:"CalendarPCTable",props:["weeks"]},S={style:{width:"85%",margin:"auto"}},E={key:0,class:"day"},R={key:0,class:"thumbnail"},F={key:0,class:"icon check"},L=["href"],q=["src","alt","title"],z={key:1},G=["href"],K={class:_("date-shadow")};function U(e,s,d,u,l,h){return a(),n("table",S,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",{class:"dark"},"日"),t("th",{class:"pale"},"月"),t("th",{class:"pale"},"火"),t("th",{class:"pale"},"水"),t("th",{class:"pale"},"木"),t("th",{class:"pale"},"金"),t("th",{class:"dark"},"土")])],-1)),t("tbody",null,[(a(!0),n(p,null,y(d.weeks,(o,c)=>(a(),n("tr",{key:`week-${c}`},[(a(!0),n(p,null,y(o,(r,f)=>(a(),n("td",{key:`day-${c}-${f}`,class:_(r.date!=-1?"":"hide")},[r.date!=-1?(a(),n("div",E,[(a(!0),n(p,null,y(r.movies,i=>(a(),n("div",{key:`movie-${i.id}`,class:"movie"},[i.thumbnail?(a(),n("div",R,[i.chat?(a(),n("i",F)):C("",!0),t("a",{href:i.url,target:"_blank"},[t("img",{src:i.thumbnail,alt:i.name,title:`${i.gameTitle?i.gameTitle+`
`:""}${i.name}`},null,8,q)],8,L)])):(a(),n("div",z,[s[0]||(s[0]=w(" ・")),t("a",{href:i.url,target:"_blank"},m(i.name),9,G)]))]))),128)),t("div",K,m(r.date)+"日 ",1),t("div",{class:_("date"+(f==0||f==6?" holydays":""))},m(r.date)+"日 ",3)])):C("",!0)],2))),128))]))),128))])])}const X=v(N,[["render",U],["__scopeId","data-v-7f1c7d4d"]]),A={name:"CalendarPCTable",props:["days"],data:function(){return{dayOfWeeks:["日","月","火","水","木","金","土"]}}},J={key:0,class:"date holydays"},Q={key:1,class:"date"},Y={class:"day"},Z=["href"];function x(e,s,d,u,l,h){return a(),n("table",null,[t("tbody",null,[(a(!0),n(p,null,y(d.days,(o,c)=>(a(),n("tr",{key:`day-${c}`},[o.dayOfWeek==0||o.dayOfWeek==6?(a(),n("th",J,m(o.date)+"日",1)):(a(),n("th",Q,m(o.date)+"日",1)),t("th",{class:_((o.dayOfWeek==0||o.dayOfWeek==6?"dark":"pale")+" day-of-week")},m(e.dayOfWeeks[o.dayOfWeek]),3),t("td",null,[t("div",Y,[(a(!0),n(p,null,y(o.movies,r=>(a(),n("div",{key:`movie-${r.id}`,class:"movie"},[s[0]||(s[0]=w(" ・")),t("a",{href:r.url},m(r.name),9,Z)]))),128))])])]))),128))])])}const ee=v(A,[["render",x],["__scopeId","data-v-264bd645"]]),te={name:"CalendarShow",components:{Header:V,PCTable:X,MobileTable:ee},data:function(){let s=H().params.calendarMonth,d=parseInt(s.split("-")[0]),u=parseInt(s.split("-")[1]),l=M(d,u),h=I(l);return{isMobile:P.isMobile(),year:d,month:u,days:l,weeks:h}},methods:{moveMonth:function(e){this.month=parseInt(this.month)+parseInt(e),this.month<=0&&(this.year=parseInt(this.year)-1,this.month=12),this.month>12&&(this.year=parseInt(this.year)+1,this.month=1),this.days=M(this.year,this.month),this.weeks=I(this.days)}},mounted:async function(){await $.execute()}};function M(e,s){let d=[],u=$.getMoviesData(),l=$.getGamesData(),h=new Date(e,s-1,1),o=new Date(e,s,0);for(let c=1;c<=o.getDate();c++){let r={date:c,dayOfWeek:(h.getDay()+c-1)%7,movies:[]},f=e+"/"+("0"+s).slice(-2)+"/"+("0"+c).slice(-2);Object.keys(u).forEach(i=>{let k=u[i];if(k.releaseDate==f){let O="";if(k.url.indexOf("https://www.youtube.com/watch")==0){var j=new URL(k.url),g=j.searchParams.get("v");g&&(O="http://img.youtube.com/vi/"+g+"/mqdefault.jpg")}let D=[];k.gameIds.forEach(W=>{W!=99999&&D.push(l[W].name)}),r.movies.push({id:i,name:k.name,url:k.url,chat:k.chat,gameTitle:D.join(`
`),thumbnail:O})}}),d.push(r)}return d}function I(e){e=P.copyDeep(e);let s=e[0].dayOfWeek;for(let l=0;l<s;l++)e.unshift({date:-1,dayOfWeek:l,movies:[]});let d=e[e.length-1].dayOfWeek;for(let l=d+1;l<7;l++)e.push({date:-1,dayOfWeek:l,movies:[]});let u=[];for(let l=0;l<e.length/7;l++){let h=[];for(let o=0;o<7;o++)h.push(e[l*7+o]);u.push(h)}return u}const se={class:"subject"};function ae(e,s,d,u,l,h){const o=b("Header"),c=b("PCTable"),r=b("MobileTable");return a(),n("div",null,[B(o),t("h3",null,[t("div",se,[t("button",{onClick:s[0]||(s[0]=f=>h.moveMonth(-1)),class:"move-month"},s[2]||(s[2]=[t("i",{class:"icon left"},null,-1)])),w(" "+m(e.year)+"年"+m(("0"+e.month).slice(-2))+"月 ",1),t("button",{onClick:s[1]||(s[1]=f=>h.moveMonth(1)),class:"move-month"},s[3]||(s[3]=[t("i",{class:"icon right"},null,-1)]))])]),e.isMobile==!1?(a(),T(c,{key:0,weeks:e.weeks},null,8,["weeks"])):(a(),T(r,{key:1,days:e.days},null,8,["days"]))])}const oe=v(te,[["render",ae],["__scopeId","data-v-c6b7e23c"]]);export{oe as default};
