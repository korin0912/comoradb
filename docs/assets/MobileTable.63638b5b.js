import{c as C}from"./Common.cdc94631.js";import{bD as f,bz as T,aO as G,aG as n,Z as r,_ as s,F as m,K as p,aM as k,a5 as I,ba as b,a4 as y,Y as _,B as $,X as L,aJ as U,aH as S}from"./index.ea561ac4.js";let v=null;function O(){if(v==null){let t=f.getGamesData(),o=f.getGameGenresData(),i=f.getMoviesData(),g=f.getActorsData();v=[],Object.keys(t).sort(function(c,l){return Number(c)-Number(l)}).forEach(c=>{let l=t[c],d={id:c,name:l.name,urls:l.urls,playListUrl:"playListUrl"in l?l.playListUrl:"",genres:l.genreIds.map(a=>({id:a,key:"genre-"+a,name:o[a]}))},e=!1;Object.keys(i).forEach(a=>{let u=i[a];if(u.gameIds.find(R=>c==R)==null)return;let w=u.releaseDate.split("/"),D={id:a,releaseDate:w[0]+"/"+("0"+w[1]).slice(-2)+"/"+("0"+w[2]).slice(-2),name:u.name,url:u.url,actors:u.actorIds.map(R=>({id:R,name:g[R].name})),chat:u.chat};v.push({key:"games-"+v.length,gameRow:1,game:d,nogame:!1,movieRow:1,movie:D}),e=!0}),e||v.push({gameRow:1,game:d,movieRow:1,movie:{id:"",releaseDate:"",name:"",url:"",actors:[],chat:!1}})}),Object.keys(i).forEach(c=>{let l=i[c];if(l.gameIds[0]!=99999)return;let d=l.releaseDate.split("/"),e={id:c,releaseDate:d[0]+"/"+("0"+d[1]).slice(-2)+"/"+("0"+d[2]).slice(-2),name:l.name,url:l.url,actors:l.actorIds.map(a=>({id:a,name:g[a].name})),chat:l.chat};v.push({key:"games-"+v.length,gameRow:1,game:null,nogame:!0,movieRow:1,movie:e})})}return C.copyDeep(v)}function E(t,o){let i=null;o.text!=null&&o.text!=""&&(i=o.text.toLowerCase());let g=null;o.releaseDates.from&&(g=o.releaseDates.from.replaceAll("-","/"));let c=null;o.releaseDates.to&&(c=o.releaseDates.to.replaceAll("-","/"));let l=o.actors.filter(a=>a.check).map(a=>a.id),d=o.genres.filter(a=>a.check).map(a=>a.id),e=o.chat;return t.map(a=>{let u=!1;return i!=null&&a.game!=null&&a.game.name.toLowerCase().indexOf(i)<=-1&&a.movie.name.toLowerCase().indexOf(i)<=-1&&(u=!0),l!=null&&l.length>0&&a.movie!=null&&a.movie.actors.filter(w=>l.some(D=>D==w.id)).length<=0&&(u=!0),g&&a.movie!=null&&a.movie.releaseDate<g&&(u=!0),c&&a.movie!=null&&a.movie.releaseDate>c&&(u=!0),d!=null&&d.length>0&&a.game!=null&&a.game.genres.filter(w=>d.some(D=>D==w.id)).length<=0&&(u=!0),e&&a.movie!=null&&(a.movie.chat||(u=!0)),u&&(a.game=null,a.movie=null),a})}function A(t){f.getGamesData(),f.getGameGenresData(),f.getMoviesData(),f.getActorsData();let o=O();o=E(o,t);let i=0,g=0,c=null,l=-1,d=[];o.forEach(a=>{a.game!=null&&(a.game.id!=l?(c=a,l=a.game.id,d.findIndex(u=>u==a.game.id)==-1&&(d.push(a.game.id),i++)):(c.gameRow++,a.game=null))}),c=null,l=-1;let e=[];return o.forEach(a=>{a.movie!=null&&(a.movie.id!=l?(c=a,l=a.movie.id,e.findIndex(u=>u==a.movie.id)==-1&&(e.push(a.movie.id),g++)):(c.movieRow++,a.movie=null))}),{items:o,gameCount:i,movieCount:g}}let h=null;function B(){let t="",o=[],i=f.getActorsData();Object.keys(i).forEach(e=>{o.push({id:e,name:i[e].name,check:!1})});let g={from:"",to:""},c=[],l=f.getGameGenresData();return Object.keys(l).forEach(e=>{c.push({id:e,name:l[e],check:!1})}),h={text:t,actors:o,releaseDates:g,genres:c,chat:!1},C.copyDeep(h)}function F(t){return h.text=t.text,h.actors=x(h.actors,t.actors),h.releaseDates.from=t.releaseDates.from,h.releaseDates.to=t.releaseDates.to,h.genres=x(h.genres,t.genres),h.chat=t.chat,C.copyDeep(h)}function x(t,o){for(let i=0;i<t.length;i++)t[i].check=o[i].check;return t}function N(t,o){return o=="text"&&(t.text=""),o=="releaseDateFrom"&&(t.releaseDates.from=""),o=="releaseDateTo"&&(t.releaseDates.to=""),F(t)}const M={getTableItems:A,getInitialFilterParams:B,updateFilterParams:F,resetFilterParamsInput:N};const j={name:"TopPCTable",props:["filterParams"],data:function(){let t=M.getTableItems(this.filterParams);return{common:C,items:t.items,gameCount:t.gameCount,movieCount:t.movieCount}}},V=t=>(U("data-v-688116bd"),t=t(),S(),t),z={class:"sticky-table"},H={colspan:"4",class:"pale"},J={colspan:"5",class:"dark"},K=V(()=>s("tr",null,[s("th",{class:"pale game-id"},"#"),s("th",{class:"pale game-name",colspan:"2"},"\u30BF\u30A4\u30C8\u30EB"),s("th",{class:"pale game-genres"},"\u30B8\u30E3\u30F3\u30EB"),s("th",{class:"dark movie-id"},"#"),s("th",{class:"dark movie-name"},"\u30BF\u30A4\u30C8\u30EB"),s("th",{class:"dark movie-date"},"\u516C\u958B\u65E5"),s("th",{class:"dark movie-actors"},"\u51FA\u6F14"),s("th",{class:"dark movie-chat"},"\u96D1\u8AC7")],-1)),X=["rowspan"],Y=["rowspan"],Z=["href"],q=["rowspan"],Q=["href"],W=["rowspan"],P=["rowspan"],ee=["rowspan"],ae=["rowspan"],te=["rowspan"],se=["rowspan"],oe=["rowspan"],le=["href"],ne=["rowspan"],re=["rowspan"],ce=["title"],ie=["rowspan"],ue={key:0,class:"icon check"};function de(t,o,i,g,c,l){const d=G("router-link");return n(),r("table",z,[s("thead",null,[s("tr",null,[s("th",H,m("\u30B2\u30FC\u30E0 ("+t.gameCount+")"),1),s("th",J,m("\u52D5\u753B ("+t.movieCount+")"),1)]),K]),s("tbody",null,[(n(!0),r(p,null,k(t.items,e=>(n(),r(p,null,[e.game!=null||e.movie!=null?(n(),r("tr",{key:e.key,class:"text-upper"},[e.game!=null?(n(),r(p,{key:0},[s("td",{rowspan:e.gameRow,class:"text-center"},[I(d,{to:{name:"GameShow",params:{gameId:e.game.id}}},{default:b(()=>[y(m(e.game.id),1)]),_:2},1032,["to"])],8,X),s("td",{rowspan:e.gameRow},[y(m(e.game.name)+" ",1),"playListUrl"in e.game&&e.game.playListUrl?(n(),r("a",{key:0,href:e.game.playListUrl,target:"_blank",class:"icon playlist"},null,8,Z)):_("",!0)],8,Y),s("td",{rowspan:e.gameRow,class:"text-center links"},[(n(!0),r(p,null,k(e.game.urls,(a,u)=>(n(),r("div",{key:`url-${e.game.id}-${u}`,class:"urlicon"},[s("a",{href:a,target:"_blank",class:$("icon "+t.common.getUrlIconClass(a))},null,10,Q)]))),128))],8,q),s("td",{rowspan:e.gameRow},[(n(!0),r(p,null,k(e.game.genres,a=>(n(),r("span",{key:a.key,class:"genre"},m(a.name),1))),128))],8,W)],64)):e.nogame?(n(),r(p,{key:1},[s("td",{rowspan:e.gameRow,class:"text-center nogame"},null,8,P),s("td",{rowspan:e.gameRow,class:"nogame"},null,8,ee),s("td",{rowspan:e.gameRow,class:"text-center links nogame"},null,8,ae),s("td",{rowspan:e.gameRow,class:"nogame"},null,8,te)],64)):_("",!0),e.movie!=null?(n(),r(p,{key:2},[s("td",{rowspan:e.movieRow,class:$(`text-center ${e.game==null?"border-left-none":""}`)},[e.movie.id?(n(),L(d,{key:0,to:{name:"MovieShow",params:{movieId:e.movie.id}}},{default:b(()=>[y(m(e.movie.id),1)]),_:2},1032,["to"])):_("",!0)],10,se),s("td",{rowspan:e.movieRow,class:"movie"},[s("a",{href:e.movie.url,target:"_blank"},m(e.movie.name),9,le)],8,oe),s("td",{rowspan:e.movieRow,class:"text-center"},m(e.movie.releaseDate),9,ne),s("td",{rowspan:e.movieRow,class:"text-center"},[(n(!0),r(p,null,k(e.movie.actors,a=>(n(),r("div",{key:`actor-${a.id}`,class:"actoricon"},[I(d,{to:{name:"ActorShow",params:{actorId:a.id}}},{default:b(()=>[s("i",{title:a.name,class:$(`icon actor-${a.id}`)},null,10,ce)]),_:2},1032,["to"])]))),128))],8,re),s("td",{rowspan:e.movieRow,class:"text-center"},[e.movie.chat?(n(),r("i",ue)):_("",!0)],8,ie)],64)):_("",!0)])):_("",!0)],64))),256))])])}const Ge=T(j,[["render",de],["__scopeId","data-v-688116bd"]]);const me={name:"TopMobileTable",props:["filterParams"],data:function(){let t=M.getTableItems(this.filterParams);return{common:C,items:t.items,gameCount:t.gameCount,movieCount:t.movieCount}}},pe=t=>(U("data-v-d26f41a2"),t=t(),S(),t),ge={class:"sticky-table"},he={colspan:"2",class:"pale"},_e={colspan:"2",class:"dark"},fe=pe(()=>s("tr",null,[s("th",{class:"pale game-id"},"#"),s("th",{class:"pale game-name"},"\u30BF\u30A4\u30C8\u30EB"),s("th",{class:"dark movie-id"},"#"),s("th",{class:"dark movie-name"},"\u30BF\u30A4\u30C8\u30EB")],-1)),ve=["rowspan"],we=["rowspan"],ke=["href"],ye=["href"],De=["rowspan"],be=["rowspan"],$e=["rowspan"],Ce=["rowspan"],Re=["href"];function Ie(t,o,i,g,c,l){const d=G("router-link");return n(),r("table",ge,[s("thead",null,[s("tr",null,[s("th",he,m("\u30B2\u30FC\u30E0 ("+t.gameCount+")"),1),s("th",_e,m("\u52D5\u753B ("+t.movieCount+")"),1)]),fe]),s("tbody",null,[(n(!0),r(p,null,k(t.items,e=>(n(),r(p,null,[e.game!=null||e.movie!=null?(n(),r("tr",{key:e.key,class:"text-upper"},[e.game!=null?(n(),r(p,{key:0},[s("td",{rowspan:e.gameRow,class:"text-center"},[I(d,{to:{name:"GameShow",params:{gameId:e.game.id}}},{default:b(()=>[y(m(e.game.id),1)]),_:2},1032,["to"])],8,ve),s("td",{rowspan:e.gameRow},[y(m(e.game.name)+" ",1),"playListUrl"in e.game&&e.game.playListUrl?(n(),r("a",{key:0,href:e.game.playListUrl,target:"_blank",class:"icon playlist"},null,8,ke)):_("",!0),s("div",null,[(n(!0),r(p,null,k(e.game.urls,(a,u)=>(n(),r("div",{key:`url-${e.game.id}-${u}`,class:"urlicon"},[s("a",{href:a,target:"_blank",class:$("icon "+t.common.getUrlIconClass(a))},null,10,ye)]))),128))])],8,we)],64)):e.nogame?(n(),r(p,{key:1},[s("td",{rowspan:e.gameRow,class:"text-center nogame"},null,8,De),s("td",{rowspan:e.gameRow,class:"nogame"},null,8,be)],64)):_("",!0),e.movie!=null?(n(),r(p,{key:2},[s("td",{rowspan:e.movieRow,class:$(`text-center ${e.game==null?"border-left-none":""}`)},[e.movie.id?(n(),L(d,{key:0,to:{name:"MovieShow",params:{movieId:e.movie.id}}},{default:b(()=>[y(m(e.movie.id),1)]),_:2},1032,["to"])):_("",!0)],10,$e),s("td",{rowspan:e.movieRow,class:"movie"},[s("a",{href:e.movie.url,target:"_blank"},m(e.movie.name),9,Re)],8,Ce)],64)):_("",!0)])):_("",!0)],64))),256))])])}const Le=T(me,[["render",Ie],["__scopeId","data-v-d26f41a2"]]);export{Le as M,Ge as P,M as t};
