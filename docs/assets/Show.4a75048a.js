import{H as B,c as W}from"./Common.dc1a7d4e.js";import{bz as y,aG as s,Z as n,_ as t,K as p,aM as m,B as C,F as u,Y as w,a4 as b,aJ as M,aH as T,bE as j,bD as I,aO as k,a5 as H,X as O}from"./index.e24f1624.js";const N={name:"CalendarPCTable",props:["weeks"]},V=e=>(M("data-v-e5a9182a"),e=e(),T(),e),E=V(()=>t("thead",null,[t("tr",null,[t("th",{class:"dark"},"\u65E5"),t("th",{class:"pale"},"\u6708"),t("th",{class:"pale"},"\u706B"),t("th",{class:"pale"},"\u6C34"),t("th",{class:"pale"},"\u6728"),t("th",{class:"pale"},"\u91D1"),t("th",{class:"dark"},"\u571F")])],-1)),x={key:0,class:"day"},z={key:0,class:"date holydays"},F={key:1,class:"date"},L={key:0,class:"thumbnail"},R={key:0,class:"icon check"},q=["href"],G=["src","alt","title"],J={key:1},K=["href"];function U(e,r,i,d,l,h){return s(),n("table",null,[E,t("tbody",null,[(s(!0),n(p,null,m(i.weeks,(a,_)=>(s(),n("tr",{key:`week-${_}`},[(s(!0),n(p,null,m(a,(c,f)=>(s(),n("td",{key:`day-${_}-${f}`,class:C(c.date!=-1?"":"hide")},[c.date!=-1?(s(),n("div",x,[f==0||f==6?(s(),n("div",z,u(c.date)+"\u65E5 ",1)):(s(),n("div",F,u(c.date)+"\u65E5 ",1)),(s(!0),n(p,null,m(c.movies,o=>(s(),n("div",{key:`movie-${o.id}`,class:"movie"},[o.thumbnail?(s(),n("div",L,[o.chat?(s(),n("i",R)):w("",!0),t("a",{href:o.url,target:"_blank"},[t("img",{src:o.thumbnail,alt:o.name,title:o.name},null,8,G)],8,q)])):(s(),n("div",J,[b(" \u30FB"),t("a",{href:o.url,target:"_blank"},u(o.name),9,K)]))]))),128))])):w("",!0)],2))),128))]))),128))])])}const X=y(N,[["render",U],["__scopeId","data-v-e5a9182a"]]);const Y={name:"CalendarPCTable",props:["days"],data:function(){return{dayOfWeeks:["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"]}}},Z={key:0,class:"date holydays"},A={key:1,class:"date"},Q={class:"day"},ee=["href"];function te(e,r,i,d,l,h){return s(),n("table",null,[t("tbody",null,[(s(!0),n(p,null,m(i.days,(a,_)=>(s(),n("tr",{key:`day-${_}`},[a.dayOfWeek==0||a.dayOfWeek==6?(s(),n("th",Z,u(a.date)+"\u65E5",1)):(s(),n("th",A,u(a.date)+"\u65E5",1)),t("th",{class:C((a.dayOfWeek==0||a.dayOfWeek==6?"dark":"pale")+" day-of-week")},u(e.dayOfWeeks[a.dayOfWeek]),3),t("td",null,[t("div",Q,[(s(!0),n(p,null,m(a.movies,c=>(s(),n("div",{key:`movie-${c.id}`,class:"movie"},[b(" \u30FB"),t("a",{href:c.url},u(c.name),9,ee)]))),128))])])]))),128))])])}const se=y(Y,[["render",te],["__scopeId","data-v-d0da87ff"]]);const ae={name:"CalendarShow",components:{Header:B,PCTable:X,MobileTable:se},data:function(){let r=j().params.calendarMonth,i=parseInt(r.split("-")[0]),d=parseInt(r.split("-")[1]),l=g(i,d),h=D(l);return{isMobile:W.isMobile(),year:i,month:d,days:l,weeks:h}},methods:{moveMonth:function(e){this.month=parseInt(this.month)+parseInt(e),this.month<=0&&(this.year=parseInt(this.year)-1,this.month=12),this.month>12&&(this.year=parseInt(this.year)+1,this.month=1),this.days=g(this.year,this.month),this.weeks=D(this.days)}},mounted:async function(){await I.execute()}};function g(e,r){let i=[],d=I.getMoviesData(),l=new Date(e,r-1,1),h=new Date(e,r,0);for(let a=1;a<=h.getDate();a++){let _={date:a,dayOfWeek:(l.getDay()+a-1)%7,movies:[]},c=e+"/"+("0"+r).slice(-2)+"/"+("0"+a).slice(-2);Object.keys(d).forEach(f=>{let o=d[f];if(o.releaseDate==c){let $="";if(o.url.indexOf("https://www.youtube.com/watch")==0){var P=new URL(o.url),v=P.searchParams.get("v");v&&($="http://img.youtube.com/vi/"+v+"/mqdefault.jpg")}_.movies.push({id:f,name:o.name,url:o.url,chat:o.chat,thumbnail:$})}}),i.push(_)}return i}function D(e){e=W.copyDeep(e);let r=e[0].dayOfWeek;for(let l=0;l<r;l++)e.unshift({date:-1,dayOfWeek:l,movies:[]});let i=e[e.length-1].dayOfWeek;for(let l=i+1;l<7;l++)e.push({date:-1,dayOfWeek:l,movies:[]});let d=[];for(let l=0;l<e.length/7;l++){let h=[];for(let a=0;a<7;a++)h.push(e[l*7+a]);d.push(h)}return d}const S=e=>(M("data-v-5518f26b"),e=e(),T(),e),ne={class:"subject"},le=S(()=>t("i",{class:"icon left"},null,-1)),oe=[le],re=S(()=>t("i",{class:"icon right"},null,-1)),ce=[re];function ie(e,r,i,d,l,h){const a=k("Header"),_=k("PCTable"),c=k("MobileTable");return s(),n("div",null,[H(a),t("h3",null,[t("div",ne,[t("button",{onClick:r[0]||(r[0]=f=>h.moveMonth(-1)),class:"move-month"},oe),b(" "+u(e.year)+"\u5E74"+u(("0"+e.month).slice(-2))+"\u6708 ",1),t("button",{onClick:r[1]||(r[1]=f=>h.moveMonth(1)),class:"move-month"},ce)])]),e.isMobile==!1?(s(),O(_,{key:0,weeks:e.weeks},null,8,["weeks"])):(s(),O(c,{key:1,days:e.days},null,8,["days"]))])}const _e=y(ae,[["render",ie],["__scopeId","data-v-5518f26b"]]);export{_e as default};
