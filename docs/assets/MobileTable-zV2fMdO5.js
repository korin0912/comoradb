import{c as $}from"./Common-BbRbKBwD.js";import{bR as _,bO as T,aK as n,u as r,v as t,b9 as d,F as g,aV as k,I as x,bH as b,H as y,t as f,at as R,s as G,aX as L}from"./index-Cyww_-FW.js";let v=null;function O(){if(v==null){let s=_.getGamesData(),o=_.getGameGenresData(),u=_.getMoviesData(),p=_.getActorsData();v=[],Object.keys(s).sort(function(c,l){return Number(c)-Number(l)}).forEach(c=>{let l=s[c],m={id:c,name:l.name,urls:l.urls,playListUrl:"playListUrl"in l?l.playListUrl:"",genres:l.genreIds.map(a=>({id:a,key:"genre-"+a,name:o[a]}))},e=!1;Object.keys(u).forEach(a=>{let i=u[a];if(i.gameIds.find(C=>c==C)==null)return;let w=i.releaseDate.split("/"),D={id:a,releaseDate:w[0]+"/"+("0"+w[1]).slice(-2)+"/"+("0"+w[2]).slice(-2),name:i.name,url:i.url,actors:i.actorIds.map(C=>({id:C,name:p[C].name})),chat:i.chat};v.push({key:"games-"+v.length,gameRow:1,game:m,nogame:!1,movieRow:1,movie:D}),e=!0}),e||v.push({gameRow:1,game:m,movieRow:1,movie:{id:"",releaseDate:"",name:"",url:"",actors:[],chat:!1}})}),Object.keys(u).forEach(c=>{let l=u[c];if(l.gameIds[0]!=99999)return;let m=l.releaseDate.split("/"),e={id:c,releaseDate:m[0]+"/"+("0"+m[1]).slice(-2)+"/"+("0"+m[2]).slice(-2),name:l.name,url:l.url,actors:l.actorIds.map(a=>({id:a,name:p[a].name})),chat:l.chat};v.push({key:"games-"+v.length,gameRow:1,game:null,nogame:!0,movieRow:1,movie:e})})}return $.copyDeep(v)}function E(s,o){let u=null;o.text!=null&&o.text!=""&&(u=o.text.toLowerCase());let p=null;o.releaseDates.from&&(p=o.releaseDates.from.replaceAll("-","/"));let c=null;o.releaseDates.to&&(c=o.releaseDates.to.replaceAll("-","/"));let l=o.actors.filter(a=>a.check).map(a=>a.id),m=o.genres.filter(a=>a.check).map(a=>a.id),e=o.chat;return s.map(a=>{let i=!1;return u!=null&&a.game!=null&&a.game.name.toLowerCase().indexOf(u)<=-1&&a.movie.name.toLowerCase().indexOf(u)<=-1&&(i=!0),l!=null&&l.length>0&&a.movie!=null&&a.movie.actors.filter(w=>l.some(D=>D==w.id)).length<=0&&(i=!0),p&&a.movie!=null&&a.movie.releaseDate<p&&(i=!0),c&&a.movie!=null&&a.movie.releaseDate>c&&(i=!0),m!=null&&m.length>0&&a.game!=null&&a.game.genres.filter(w=>m.some(D=>D==w.id)).length<=0&&(i=!0),e&&a.movie!=null&&(a.movie.chat||(i=!0)),i&&(a.game=null,a.movie=null),a})}function A(s){_.getGamesData(),_.getGameGenresData(),_.getMoviesData(),_.getActorsData();let o=O();o=E(o,s);let u=0,p=0,c=null,l=-1,m=[];o.forEach(a=>{a.game!=null&&(a.game.id!=l?(c=a,l=a.game.id,m.findIndex(i=>i==a.game.id)==-1&&(m.push(a.game.id),u++)):(c.gameRow++,a.game=null))}),c=null,l=-1;let e=[];return o.forEach(a=>{a.movie!=null&&(a.movie.id!=l?(c=a,l=a.movie.id,e.findIndex(i=>i==a.movie.id)==-1&&(e.push(a.movie.id),p++)):(c.movieRow++,a.movie=null))}),{items:o,gameCount:u,movieCount:p}}let h=null;function M(){let s="",o=[],u=_.getActorsData();Object.keys(u).forEach(e=>{o.push({id:e,name:u[e].name,check:!1})});let p={from:"",to:""},c=[],l=_.getGameGenresData();return Object.keys(l).forEach(e=>{c.push({id:e,name:l[e],check:!1})}),h={text:s,actors:o,releaseDates:p,genres:c,chat:!1},$.copyDeep(h)}function U(s){return h.text=s.text,h.actors=I(h.actors,s.actors),h.releaseDates.from=s.releaseDates.from,h.releaseDates.to=s.releaseDates.to,h.genres=I(h.genres,s.genres),h.chat=s.chat,$.copyDeep(h)}function I(s,o){for(let u=0;u<s.length;u++)s[u].check=o[u].check;return s}function N(s,o){return o=="text"&&(s.text=""),o=="releaseDateFrom"&&(s.releaseDates.from=""),o=="releaseDateTo"&&(s.releaseDates.to=""),U(s)}const F={getTableItems:A,getInitialFilterParams:M,updateFilterParams:U,resetFilterParamsInput:N},S={name:"TopPCTable",props:["filterParams"],data:function(){let s=F.getTableItems(this.filterParams);return{common:$,items:s.items,gameCount:s.gameCount,movieCount:s.movieCount}}},j={class:"sticky-table"},B={colspan:"4",class:"pale"},V={colspan:"5",class:"dark"},H=["rowspan"],z=["rowspan"],K=["href"],X=["rowspan"],q=["href"],J=["rowspan"],Q=["rowspan"],W=["rowspan"],Y=["rowspan"],Z=["rowspan"],P=["rowspan"],ee=["rowspan"],ae=["href"],te=["rowspan"],se=["rowspan"],oe=["title"],le=["rowspan"],ne={key:0,class:"icon check"};function re(s,o,u,p,c,l){const m=L("router-link");return n(),r("table",j,[t("thead",null,[t("tr",null,[t("th",B,d("ゲーム ("+s.gameCount+")"),1),t("th",V,d("動画 ("+s.movieCount+")"),1)]),o[0]||(o[0]=t("tr",null,[t("th",{class:"pale game-id"},"#"),t("th",{class:"pale game-name",colspan:"2"},"タイトル"),t("th",{class:"pale game-genres"},"ジャンル"),t("th",{class:"dark movie-id"},"#"),t("th",{class:"dark movie-name"},"タイトル"),t("th",{class:"dark movie-date"},"公開日"),t("th",{class:"dark movie-actors"},"出演"),t("th",{class:"dark movie-chat"},"雑談")],-1))]),t("tbody",null,[(n(!0),r(g,null,k(s.items,e=>(n(),r(g,null,[e.game!=null||e.movie!=null?(n(),r("tr",{key:e.key,class:"text-upper"},[e.game!=null?(n(),r(g,{key:0},[t("td",{rowspan:e.gameRow,class:"text-center"},[x(m,{to:{name:"GameShow",params:{gameId:e.game.id}}},{default:b(()=>[y(d(e.game.id),1)]),_:2},1032,["to"])],8,H),t("td",{rowspan:e.gameRow},[y(d(e.game.name)+" ",1),"playListUrl"in e.game&&e.game.playListUrl?(n(),r("a",{key:0,href:e.game.playListUrl,target:"_blank",class:"icon playlist"},null,8,K)):f("",!0)],8,z),t("td",{rowspan:e.gameRow,class:"text-center links"},[(n(!0),r(g,null,k(e.game.urls,(a,i)=>(n(),r("div",{key:`url-${e.game.id}-${i}`,class:"urlicon"},[t("a",{href:a,target:"_blank",class:R("icon "+s.common.getUrlIconClass(a))},null,10,q)]))),128))],8,X),t("td",{rowspan:e.gameRow},[(n(!0),r(g,null,k(e.game.genres,a=>(n(),r("span",{key:a.key,class:"genre"},d(a.name),1))),128))],8,J)],64)):e.nogame?(n(),r(g,{key:1},[t("td",{rowspan:e.gameRow,class:"text-center nogame"},null,8,Q),t("td",{rowspan:e.gameRow,class:"nogame"},null,8,W),t("td",{rowspan:e.gameRow,class:"text-center links nogame"},null,8,Y),t("td",{rowspan:e.gameRow,class:"nogame"},null,8,Z)],64)):f("",!0),e.movie!=null?(n(),r(g,{key:2},[t("td",{rowspan:e.movieRow,class:R(`text-center ${e.game==null?"border-left-none":""}`)},[e.movie.id?(n(),G(m,{key:0,to:{name:"MovieShow",params:{movieId:e.movie.id}}},{default:b(()=>[y(d(e.movie.id),1)]),_:2},1032,["to"])):f("",!0)],10,P),t("td",{rowspan:e.movieRow,class:"movie"},[t("a",{href:e.movie.url,target:"_blank"},d(e.movie.name),9,ae)],8,ee),t("td",{rowspan:e.movieRow,class:"text-center"},d(e.movie.releaseDate),9,te),t("td",{rowspan:e.movieRow,class:"text-center"},[(n(!0),r(g,null,k(e.movie.actors,a=>(n(),r("div",{key:`actor-${a.id}`,class:"actoricon"},[x(m,{to:{name:"ActorShow",params:{actorId:a.id}}},{default:b(()=>[t("i",{title:a.name,class:R(`icon actor-${a.id}`)},null,10,oe)]),_:2},1032,["to"])]))),128))],8,se),t("td",{rowspan:e.movieRow,class:"text-center"},[e.movie.chat?(n(),r("i",ne)):f("",!0)],8,le)],64)):f("",!0)])):f("",!0)],64))),256))])])}const Re=T(S,[["render",re],["__scopeId","data-v-173d092d"]]),ce={name:"TopMobileTable",props:["filterParams"],data:function(){let s=F.getTableItems(this.filterParams);return{common:$,items:s.items,gameCount:s.gameCount,movieCount:s.movieCount}}},ue={class:"sticky-table"},ie={colspan:"2",class:"pale"},me={colspan:"2",class:"dark"},de=["rowspan"],ge=["rowspan"],pe=["href"],he=["href"],fe=["rowspan"],_e=["rowspan"],ve=["rowspan"],we=["rowspan"],ke=["href"];function ye(s,o,u,p,c,l){const m=L("router-link");return n(),r("table",ue,[t("thead",null,[t("tr",null,[t("th",ie,d("ゲーム ("+s.gameCount+")"),1),t("th",me,d("動画 ("+s.movieCount+")"),1)]),o[0]||(o[0]=t("tr",null,[t("th",{class:"pale game-id"},"#"),t("th",{class:"pale game-name"},"タイトル"),t("th",{class:"dark movie-id"},"#"),t("th",{class:"dark movie-name"},"タイトル")],-1))]),t("tbody",null,[(n(!0),r(g,null,k(s.items,e=>(n(),r(g,null,[e.game!=null||e.movie!=null?(n(),r("tr",{key:e.key,class:"text-upper"},[e.game!=null?(n(),r(g,{key:0},[t("td",{rowspan:e.gameRow,class:"text-center"},[x(m,{to:{name:"GameShow",params:{gameId:e.game.id}}},{default:b(()=>[y(d(e.game.id),1)]),_:2},1032,["to"])],8,de),t("td",{rowspan:e.gameRow},[y(d(e.game.name)+" ",1),"playListUrl"in e.game&&e.game.playListUrl?(n(),r("a",{key:0,href:e.game.playListUrl,target:"_blank",class:"icon playlist"},null,8,pe)):f("",!0),t("div",null,[(n(!0),r(g,null,k(e.game.urls,(a,i)=>(n(),r("div",{key:`url-${e.game.id}-${i}`,class:"urlicon"},[t("a",{href:a,target:"_blank",class:R("icon "+s.common.getUrlIconClass(a))},null,10,he)]))),128))])],8,ge)],64)):e.nogame?(n(),r(g,{key:1},[t("td",{rowspan:e.gameRow,class:"text-center nogame"},null,8,fe),t("td",{rowspan:e.gameRow,class:"nogame"},null,8,_e)],64)):f("",!0),e.movie!=null?(n(),r(g,{key:2},[t("td",{rowspan:e.movieRow,class:R(`text-center ${e.game==null?"border-left-none":""}`)},[e.movie.id?(n(),G(m,{key:0,to:{name:"MovieShow",params:{movieId:e.movie.id}}},{default:b(()=>[y(d(e.movie.id),1)]),_:2},1032,["to"])):f("",!0)],10,ve),t("td",{rowspan:e.movieRow,class:"movie"},[t("a",{href:e.movie.url,target:"_blank"},d(e.movie.name),9,ke)],8,we)],64)):f("",!0)])):f("",!0)],64))),256))])])}const $e=T(ce,[["render",ye],["__scopeId","data-v-59cec588"]]);export{$e as M,Re as P,F as t};
