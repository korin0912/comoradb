import{H as B,c as j}from"./Common-cvnJQ7Q8.js";import{_ as v,c as n,o as a,a as t,F as p,r as y,O as _,g as C,P as g,t as m,e as b,h as N,f as M,M as $,Q as V}from"./index-DrkveknY.js";const E={name:"CalendarPCTable",props:["weeks"]},H={style:{width:"85%",margin:"auto"}},S={key:0,class:"day"},F={key:0,class:"thumbnail"},L={key:0,class:"icon check"},R=["href"],q=["src","alt","title"],z={key:1},G=["href"],Q={class:_("date-shadow")};function U(e,s,d,u,l,h){return a(),n("table",H,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",{class:"dark"},"日"),t("th",{class:"pale"},"月"),t("th",{class:"pale"},"火"),t("th",{class:"pale"},"水"),t("th",{class:"pale"},"木"),t("th",{class:"pale"},"金"),t("th",{class:"dark"},"土")])],-1)),t("tbody",null,[(a(!0),n(p,null,y(d.weeks,(o,c)=>(a(),n("tr",{key:`week-${c}`},[(a(!0),n(p,null,y(o,(r,f)=>(a(),n("td",{key:`day-${c}-${f}`,class:_(r.date!=-1?"":"hide")},[r.date!=-1?(a(),n("div",S,[(a(!0),n(p,null,y(r.movies,i=>(a(),n("div",{key:`movie-${i.id}`,class:"movie"},[i.thumbnail?(a(),n("div",F,[i.chat?(a(),n("i",L)):C("",!0),t("a",{href:i.url,target:"_blank"},[t("img",{src:i.thumbnail,alt:i.name,title:`${i.gameTitle?i.gameTitle+`
`:""}${i.name}`},null,8,q)],8,R)])):(a(),n("div",z,[s[0]||(s[0]=g(" ・",-1)),t("a",{href:i.url,target:"_blank"},m(i.name),9,G)]))]))),128)),t("div",Q,m(r.date)+"日 ",1),t("div",{class:_("date"+(f==0||f==6?" holydays":""))},m(r.date)+"日 ",3)])):C("",!0)],2))),128))]))),128))])])}const A=v(E,[["render",U],["__scopeId","data-v-7f1c7d4d"]]),J={name:"CalendarPCTable",props:["days"],data:function(){return{dayOfWeeks:["日","月","火","水","木","金","土"]}}},K={key:0,class:"date holydays"},X={key:1,class:"date"},Y={class:"day"},Z=["href"];function x(e,s,d,u,l,h){return a(),n("table",null,[t("tbody",null,[(a(!0),n(p,null,y(d.days,(o,c)=>(a(),n("tr",{key:`day-${c}`},[o.dayOfWeek==0||o.dayOfWeek==6?(a(),n("th",K,m(o.date)+"日",1)):(a(),n("th",X,m(o.date)+"日",1)),t("th",{class:_((o.dayOfWeek==0||o.dayOfWeek==6?"dark":"pale")+" day-of-week")},m(e.dayOfWeeks[o.dayOfWeek]),3),t("td",null,[t("div",Y,[(a(!0),n(p,null,y(o.movies,r=>(a(),n("div",{key:`movie-${r.id}`,class:"movie"},[s[0]||(s[0]=g(" ・",-1)),t("a",{href:r.url},m(r.name),9,Z)]))),128))])])]))),128))])])}const ee=v(J,[["render",x],["__scopeId","data-v-264bd645"]]),te={name:"CalendarShow",components:{Header:B,PCTable:A,MobileTable:ee},data:function(){let s=V().params.calendarMonth,d=parseInt(s.split("-")[0]),u=parseInt(s.split("-")[1]),l=T(d,u),h=P(l);return{isMobile:j.isMobile(),year:d,month:u,days:l,weeks:h}},methods:{moveMonth:function(e){this.month=parseInt(this.month)+parseInt(e),this.month<=0&&(this.year=parseInt(this.year)-1,this.month=12),this.month>12&&(this.year=parseInt(this.year)+1,this.month=1),this.days=T(this.year,this.month),this.weeks=P(this.days)}},mounted:async function(){await $.execute()}};function T(e,s){let d=[],u=$.getMoviesData(),l=$.getGamesData(),h=new Date(e,s-1,1),o=new Date(e,s,0);for(let c=1;c<=o.getDate();c++){let r={date:c,dayOfWeek:(h.getDay()+c-1)%7,movies:[]},f=e+"/"+("0"+s).slice(-2)+"/"+("0"+c).slice(-2);Object.keys(u).forEach(i=>{let k=u[i];if(k.releaseDate==f){let O="";if(k.url.indexOf("https://www.youtube.com/watch")==0){var I=new URL(k.url),w=I.searchParams.get("v");w&&(O="http://img.youtube.com/vi/"+w+"/mqdefault.jpg")}let D=[];k.gameIds.forEach(W=>{W!=99999&&D.push(l[W].name)}),r.movies.push({id:i,name:k.name,url:k.url,chat:k.chat,gameTitle:D.join(`
`),thumbnail:O})}}),d.push(r)}return d}function P(e){e=j.copyDeep(e);let s=e[0].dayOfWeek;for(let l=0;l<s;l++)e.unshift({date:-1,dayOfWeek:l,movies:[]});let d=e[e.length-1].dayOfWeek;for(let l=d+1;l<7;l++)e.push({date:-1,dayOfWeek:l,movies:[]});let u=[];for(let l=0;l<e.length/7;l++){let h=[];for(let o=0;o<7;o++)h.push(e[l*7+o]);u.push(h)}return u}const se={class:"subject"};function ae(e,s,d,u,l,h){const o=b("Header"),c=b("PCTable"),r=b("MobileTable");return a(),n("div",null,[N(o),t("h3",null,[t("div",se,[t("button",{onClick:s[0]||(s[0]=f=>h.moveMonth(-1)),class:"move-month"},[...s[2]||(s[2]=[t("i",{class:"icon left"},null,-1)])]),g(" "+m(e.year)+"年"+m(("0"+e.month).slice(-2))+"月 ",1),t("button",{onClick:s[1]||(s[1]=f=>h.moveMonth(1)),class:"move-month"},[...s[3]||(s[3]=[t("i",{class:"icon right"},null,-1)])])])]),e.isMobile==!1?(a(),M(c,{key:0,weeks:e.weeks},null,8,["weeks"])):(a(),M(r,{key:1,days:e.days},null,8,["days"]))])}const oe=v(te,[["render",ae],["__scopeId","data-v-c6b7e23c"]]);export{oe as default};
