import{H as B,c as M}from"./Common-adgQKusb.js";import{bE as $,aE as s,u as a,v as t,F as p,aP as k,ao as P,b3 as f,t as W,H as v,aI as S,aF as j,bI as N,bH as b,I as V,s as C,aR as y}from"./index-qbg-TQrD.js";const F={name:"CalendarPCTable",props:["weeks"]},R=e=>(S("data-v-b39c780f"),e=e(),j(),e),L=R(()=>t("thead",null,[t("tr",null,[t("th",{class:"dark"},"日"),t("th",{class:"pale"},"月"),t("th",{class:"pale"},"火"),t("th",{class:"pale"},"水"),t("th",{class:"pale"},"木"),t("th",{class:"pale"},"金"),t("th",{class:"dark"},"土")])],-1)),q={key:0,class:"day"},z={key:0,class:"date holydays"},G={key:1,class:"date"},U={key:0,class:"thumbnail"},A={key:0,class:"icon check"},J=["href"],K=["src","alt","title"],Q={key:1},X=["href"];function Y(e,o,i,h,n,u){return s(),a("table",null,[L,t("tbody",null,[(s(!0),a(p,null,k(i.weeks,(l,d)=>(s(),a("tr",{key:`week-${d}`},[(s(!0),a(p,null,k(l,(r,m)=>(s(),a("td",{key:`day-${d}-${m}`,class:P(r.date!=-1?"":"hide")},[r.date!=-1?(s(),a("div",q,[m==0||m==6?(s(),a("div",z,f(r.date)+"日 ",1)):(s(),a("div",G,f(r.date)+"日 ",1)),(s(!0),a(p,null,k(r.movies,c=>(s(),a("div",{key:`movie-${c.id}`,class:"movie"},[c.thumbnail?(s(),a("div",U,[c.chat?(s(),a("i",A)):W("",!0),t("a",{href:c.url,target:"_blank"},[t("img",{src:c.thumbnail,alt:c.name,title:`${c.gameTitle?c.gameTitle+`
`:""}${c.name}`},null,8,K)],8,J)])):(s(),a("div",Q,[v(" ・"),t("a",{href:c.url,target:"_blank"},f(c.name),9,X)]))]))),128))])):W("",!0)],2))),128))]))),128))])])}const Z=$(F,[["render",Y],["__scopeId","data-v-b39c780f"]]),x={name:"CalendarPCTable",props:["days"],data:function(){return{dayOfWeeks:["日","月","火","水","木","金","土"]}}},ee={key:0,class:"date holydays"},te={key:1,class:"date"},se={class:"day"},ae=["href"];function ne(e,o,i,h,n,u){return s(),a("table",null,[t("tbody",null,[(s(!0),a(p,null,k(i.days,(l,d)=>(s(),a("tr",{key:`day-${d}`},[l.dayOfWeek==0||l.dayOfWeek==6?(s(),a("th",ee,f(l.date)+"日",1)):(s(),a("th",te,f(l.date)+"日",1)),t("th",{class:P((l.dayOfWeek==0||l.dayOfWeek==6?"dark":"pale")+" day-of-week")},f(e.dayOfWeeks[l.dayOfWeek]),3),t("td",null,[t("div",se,[(s(!0),a(p,null,k(l.movies,r=>(s(),a("div",{key:`movie-${r.id}`,class:"movie"},[v(" ・"),t("a",{href:r.url},f(r.name),9,ae)]))),128))])])]))),128))])])}const le=$(x,[["render",ne],["__scopeId","data-v-264bd645"]]),oe={name:"CalendarShow",components:{Header:B,PCTable:Z,MobileTable:le},data:function(){let o=N().params.calendarMonth,i=parseInt(o.split("-")[0]),h=parseInt(o.split("-")[1]),n=T(i,h),u=I(n);return{isMobile:M.isMobile(),year:i,month:h,days:n,weeks:u}},methods:{moveMonth:function(e){this.month=parseInt(this.month)+parseInt(e),this.month<=0&&(this.year=parseInt(this.year)-1,this.month=12),this.month>12&&(this.year=parseInt(this.year)+1,this.month=1),this.days=T(this.year,this.month),this.weeks=I(this.days)}},mounted:async function(){await b.execute()}};function T(e,o){let i=[],h=b.getMoviesData(),n=b.getGamesData(),u=new Date(e,o-1,1),l=new Date(e,o,0);for(let d=1;d<=l.getDate();d++){let r={date:d,dayOfWeek:(u.getDay()+d-1)%7,movies:[]},m=e+"/"+("0"+o).slice(-2)+"/"+("0"+d).slice(-2);Object.keys(h).forEach(c=>{let _=h[c];if(_.releaseDate==m){let g="";if(_.url.indexOf("https://www.youtube.com/watch")==0){var H=new URL(_.url),w=H.searchParams.get("v");w&&(g="http://img.youtube.com/vi/"+w+"/mqdefault.jpg")}let D=[];_.gameIds.forEach(O=>{O!=99999&&D.push(n[O].name)}),r.movies.push({id:c,name:_.name,url:_.url,chat:_.chat,gameTitle:D.join(`
`),thumbnail:g})}}),i.push(r)}return i}function I(e){e=M.copyDeep(e);let o=e[0].dayOfWeek;for(let n=0;n<o;n++)e.unshift({date:-1,dayOfWeek:n,movies:[]});let i=e[e.length-1].dayOfWeek;for(let n=i+1;n<7;n++)e.push({date:-1,dayOfWeek:n,movies:[]});let h=[];for(let n=0;n<e.length/7;n++){let u=[];for(let l=0;l<7;l++)u.push(e[n*7+l]);h.push(u)}return h}const E=e=>(S("data-v-c6b7e23c"),e=e(),j(),e),re={class:"subject"},ce=E(()=>t("i",{class:"icon left"},null,-1)),ie=[ce],de=E(()=>t("i",{class:"icon right"},null,-1)),he=[de];function ue(e,o,i,h,n,u){const l=y("Header"),d=y("PCTable"),r=y("MobileTable");return s(),a("div",null,[V(l),t("h3",null,[t("div",re,[t("button",{onClick:o[0]||(o[0]=m=>u.moveMonth(-1)),class:"move-month"},ie),v(" "+f(e.year)+"年"+f(("0"+e.month).slice(-2))+"月 ",1),t("button",{onClick:o[1]||(o[1]=m=>u.moveMonth(1)),class:"move-month"},he)])]),e.isMobile==!1?(s(),C(d,{key:0,weeks:e.weeks},null,8,["weeks"])):(s(),C(r,{key:1,days:e.days},null,8,["days"]))])}const _e=$(oe,[["render",ue],["__scopeId","data-v-c6b7e23c"]]);export{_e as default};
